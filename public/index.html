<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    
    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Godfucker!</title>
    
    <link href="/stylesheets/normalize.css" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/all.css" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/all.js" type="text/javascript"></script>
  </head>
  
  <body class="index">
    <script type="text/x-handlebars" data-template-name="application">
  <h1>Ascension</h1>
  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="games">
  <a href="#" {{action "resetGame"}}>Reset</a><br>
  {{#if showGames}}
  {{#each game in this}}
    {{#linkTo "game" game }}Game {{game.id}}{{/linkTo}}
    <br>
  {{/each}}
  {{/if}}
  <br>
  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="game">
  Current Side Index: {{current_side_index}}<br>
  Honor: {{honor}}<br>
  
  {{view Em.TextField valueBinding="cardToAdd"}}
  <a href="#" {{action addCard}}>Add Card</a><br>
  
  
  <br>

  {{partial "center"}}

  <br><br>
  
  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="_center">
  Center: <br>

  <div class="row">
    {{#each card in constantCards}}
      <div class="span2">
        {{#if card.engageable}}
          <a href="#" {{action "acquireCard" card}}>{{card.name}}</a>
        {{else}}
          {{card.name}}
        {{/if}}
      </div>
    {{/each}}
    <div class="span6"></div>
  </div>

  <div class="row">
    {{#each card in centerCards}}
      <div class="span2">
        {{#if card.engageable}}
          <a href="#" {{action "acquireCard" card}}>{{card.name}}</a>
        {{else}}
          {{card.name}}
        {{/if}}
      </div>
    {{/each}}
  </div>
</script>


<script type="text/x-handlebars" data-template-name="_my_side">
  <div class="row">
    {{partial "actions"}}
    {{partial "pool"}}
    {{partial "hand"}}
    {{partial "played"}}
    {{partial "discard"}}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="side">
  {{partial "my_side"}}
  <br><br>
  {{render other_side otherSide}}
</script>

<script type="text/x-handlebars" data-template-name="_history">
  <div class="span6">
    <h3>Last Turn</h3>
    <h4>Played</h4>
    {{#each card in last_turn.played_cards}}
      {{card.name}}<br>
    {{/each}}
    <h4>Engaged</h4>
    {{#each card in last_turn.engaged_cards}}
      {{card.name}}<br>
    {{/each}}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="other_side">
  <div class="row">
    {{partial "pool"}}
    {{partial "played"}}
    {{partial "discard"}}
    {{partial "history"}}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="_actions">
  <div class="span4">
    Side: {{sideNum}}<br>
    {{#if isCurrent}}
      <a href="#" {{action "endTurn"}}>End Turn</a><br>
    {{/if}}
    {{#if hasChoice}}
      <h3>Choice</h3>
      {{#each choice in choices}}
        {{choice.name}}<br>
        {{#if choice.optional}}
          <a href="#" {{action "chooseOption" choice null}}>None</a><br>
        {{/if}}
        {{#each card in choice.choosable_cards}}
          <a href="#" {{action "chooseOption" choice card}}>{{card.name}}</a><br>
        {{/each}}
      {{/each}}
    {{/if}}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="_pool">
  <div class="span2">
    <h3>Pool</h3>
    Runes: {{played.pool.runes}}<br>
    Power: {{played.pool.power}}<br>
    Honor: {{honor}}<br>
    D/H Size: {{deck.cards.length}}/{{hand.cards.length}}
    <h3>Constructs</h3>
    {{#each card in constructs.cards}}
      {{#if card.has_invokable_ability}}
        <a href="#" {{action "invokeAbility" card}}>{{card.name}}</a>
      {{else}}
        {{card.name}}
      {{/if}}
      <br>
    {{/each}}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="_hand">
  <div class="span2">
    <h3>Hand</h3>
    {{#each card in hand.cards}}
      {{#if isCurrent}}
        <a href="#" {{action "playCard" card}}>{{card.name}}</a>
      {{else}}
        {{card.name}}
      {{/if}}
      <br>
    {{/each}}

    {{#if showPlayAll}}
      <br>
      <a href="#" {{action "playAll"}}>Play All</a>
    {{/if}}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="_played">
  <div class="span2">
    <h3>Played</h3>
    {{#each card in played.cards}}
      {{card.name}}
      <br>
    {{/each}}
  </div>
</script>

<script type="text/x-handlebars" data-template-name="_discard">
  <div class="span2">
    <h3>Discard</h3>
    {{#each card in discard.cards}}
      {{card.name}}
      <br>
    {{/each}}
  </div>
</script>


Stuff!
<br>
  </body>
</html>